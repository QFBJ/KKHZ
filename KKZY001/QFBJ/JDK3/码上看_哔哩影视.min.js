/*
 * @Author: bestpvp bestpvp@sina.com
 * @Date: 2023-08-20 16:19:15
 * @LastEditors: bestpvp bestpvp@sina.com
 * @LastEditTime: 2023-08-20 16:19:47
 * @FilePath: /lintech/docs/static/tvbox/js/码上看_哔哩影视.min.js
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 */
var rule = { "\u0074\u0069\u0074\u006c\u0065": "\u1f525\u7801\u4e0a\u770b\u52a8\u6f2b", "\u0068\u006f\u0073\u0074": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0061\u0070\u0069\u002e\u0062\u0069\u006c\u0069\u0062\u0069\u006c\u0069\u002e\u0063\u006f\u006d", "\u0075\u0072\u006c": "\u002f\u0066\u0079\u0063\u006c\u0061\u0073\u0073\u002d\u0066\u0079\u0070\u0061\u0067\u0065\u0026\u0076\u006d\u0069\u0064\u003d\u0024\u0076\u006d\u0069\u0064", "\u0064\u0065\u0074\u0061\u0069\u006c\u0055\u0072\u006c": "\u002f\u0070\u0067\u0063\u002f\u0076\u0069\u0065\u0077\u002f\u0077\u0065\u0062\u002f\u0073\u0065\u0061\u0073\u006f\u006e\u003f\u0073\u0065\u0061\u0073\u006f\u006e\u005f\u0069\u0064\u003d\u0066\u0079\u0069\u0064", "\u0066\u0069\u006c\u0074\u0065\u0072\u005f\u0075\u0072\u006c": "\u0066\u006c\u003d\u007b\u007b\u0066\u006c\u007d\u007d", 'vmid获取教程': '登录后访问https://api.bilibili.com/x/web-interface/nav,搜索mid就是,cookie需要\x20bili_jct,DedeUserID,SESSDATA参数', "\u0073\u0065\u0061\u0072\u0063\u0068\u0055\u0072\u006c": '/x/web-interface/search/type?keyword=**&page=fypage&search_type=', 'searchable': 0x1, 'filterable': 0x1, 'quickSearch': 0x0, "\u0068\u0065\u0061\u0064\u0065\u0072\u0073": { 'User-Agent': 'PC_UA', 'Referer': "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0062\u0069\u006c\u0069\u0062\u0069\u006c\u0069\u002e\u0063\u006f\u006d", 'Cookie': "\u0024\u0062\u0069\u006c\u0069\u005f\u0063\u006f\u006f\u006b\u0069\u0065" }, 'timeout': 0x1388, "class_name": "千方百纪专用&番剧&国创&追更", 'class_url': "\u5168\u90e8\u0026\u0031\u0026\u0034\u0026\u65f6\u95f4\u8868", 'filter': { '全部': [{ 'key': 'tid', "\u006e\u0061\u006d\u0065": '分类', 'value': [{ "\u006e": "\u756a\u5267", "\u0076": '1' }, { "\u006e": '国创', "\u0076": '4' }, { 'n': "\u7535\u5f71", "\u0076": '2' }, { 'n': "\u7535\u89c6\u5267", 'v': "\u0035" }, { "\u006e": "\u8bb0\u5f55\u7247", "\u0076": "\u0033" }, { "\u006e": "\u7efc\u827a", 'v': "\u0037" }] }, { "\u006b\u0065\u0079": "\u006f\u0072\u0064\u0065\u0072", 'name': '排序', 'value': [{ 'n': "\u64ad\u653e\u6570\u91cf", 'v': '2' }, { "\u006e": '更新时间', "\u0076": "\u0030" }, { "\u006e": "\u6700\u9ad8\u8bc4\u5206", "\u0076": "\u0034" }, { 'n': '弹幕数量', "\u0076": "\u0031" }, { "\u006e": "\u8ffd\u770b\u4eba\u6570", "\u0076": "\u0033" }, { 'n': "\u5f00\u64ad\u65f6\u95f4", 'v': "\u0035" }, { 'n': '上映时间', 'v': "\u0036" }] }, { "\u006b\u0065\u0079": "\u0073\u0065\u0061\u0073\u006f\u006e\u005f\u0073\u0074\u0061\u0074\u0075\u0073", 'name': '付费', 'value': [{ 'n': '全部', 'v': "\u002d\u0031" }, { "\u006e": "\u514d\u8d39", 'v': "\u0031" }, { "\u006e": "\u4ed8\u8d39", "\u0076": '2%2C6' }, { 'n': "\u5927\u4f1a\u5458", 'v': '4%2C6' }] }], '时间表': [{ 'key': "\u0074\u0069\u0064", "\u006e\u0061\u006d\u0065": '分类', "\u0076\u0061\u006c\u0075\u0065": [{ "\u006e": "\u756a\u5267", 'v': '1' }, { "\u006e": '国创', 'v': '4' }] }] }, "\u0070\u006c\u0061\u0079\u005f\u0070\u0061\u0072\u0073\u0065": !![], 'pagecount': { '1': 0x1, '2': 0x1, '3': 0x1, '4': 0x1, '5': 0x1, '7': 0x1, '时间表': 0x1 }, 'lazy': '', 'limit': 0x5, '推荐': '', '推荐': 'js:let\x20d=[];function\x20get_result(url){let\x20videos=[];let\x20html=request(url);let\x20jo=JSON.parse(html);if(jo[\x22code\x22]===0){let\x20vodList=jo.result?jo.result.list:jo.data.list;vodList.forEach(function(vod){let\x20aid=(vod[\x22season_id\x22]+\x22\x22).trim();let\x20title=vod[\x22title\x22].trim();let\x20img=vod[\x22cover\x22].trim();let\x20remark=vod.new_ep?vod[\x22new_ep\x22][\x22index_show\x22]:vod[\x22index_show\x22];videos.push({vod_id:aid,vod_name:title,vod_pic:img,vod_remarks:remark})})}return\x20videos}function\x20get_rank(tid,pg){return\x20get_result(\x22https://api.bilibili.com/pgc/web/rank/list?season_type=\x22+tid+\x22&pagesize=20&page=\x22+pg+\x22&day=3\x22)}function\x20get_rank2(tid,pg){return\x20get_result(\x22https://api.bilibili.com/pgc/season/rank/web/list?season_type=\x22+tid+\x22&pagesize=20&page=\x22+pg+\x22&day=3\x22)}function\x20home_video(){let\x20videos=get_rank(1).slice(0,5);[4,2,5,3,7].forEach(function(i){videos=videos.concat(get_rank2(i).slice(0,5))});return\x20videos}VODS=home_video();', '一级': '', '一级': 'js:let\x20d=[];let\x20vmid=input.split(\x22vmid=\x22)[1].split(\x22&\x22)[0];function\x20get_result(url){let\x20videos=[];let\x20html=request(url);let\x20jo=JSON.parse(html);if(jo[\x22code\x22]===0){let\x20vodList=jo.result?jo.result.list:jo.data.list;vodList.forEach(function(vod){let\x20aid=(vod[\x22season_id\x22]+\x22\x22).trim();let\x20title=vod[\x22title\x22].trim();let\x20img=vod[\x22cover\x22].trim();let\x20remark=vod.new_ep?vod[\x22new_ep\x22][\x22index_show\x22]:vod[\x22index_show\x22];videos.push({vod_id:aid,vod_name:title,vod_pic:img,vod_remarks:remark})})}return\x20videos}function\x20get_rank(tid,pg){return\x20get_result(\x22https://api.bilibili.com/pgc/web/rank/list?season_type=\x22+tid+\x22&pagesize=20&page=\x22+pg+\x22&day=3\x22)}function\x20get_rank2(tid,pg){return\x20get_result(\x22https://api.bilibili.com/pgc/season/rank/web/list?season_type=\x22+tid+\x22&pagesize=20&page=\x22+pg+\x22&day=3\x22)}function\x20get_zhui(pg,mode){let\x20url=\x22https://api.bilibili.com/x/space/bangumi/follow/list?type=\x22+mode+\x22&follow_status=0&pn=\x22+pg+\x22&ps=10&vmid=\x22+vmid;return\x20get_result(url)}function\x20get_all(tid,pg,order,season_status){let\x20url=\x22https://api.bilibili.com/pgc/season/index/result?order=\x22+order+\x22&pagesize=20&type=1&season_type=\x22+tid+\x22&page=\x22+pg+\x22&season_status=\x22+season_status;return\x20get_result(url)}function\x20get_timeline(tid,pg){let\x20videos=[];let\x20url=\x22https://api.bilibili.com/pgc/web/timeline/v2?season_type=\x22+tid+\x22&day_before=2&day_after=4\x22;let\x20html=request(url);let\x20jo=JSON.parse(html);if(jo[\x22code\x22]===0){let\x20videos1=[];let\x20vodList=jo.result.latest;vodList.forEach(function(vod){let\x20aid=(vod[\x22season_id\x22]+\x22\x22).trim();let\x20title=vod[\x22title\x22].trim();let\x20img=vod[\x22cover\x22].trim();let\x20remark=vod[\x22pub_index\x22]+\x22\u3000\x22+vod[\x22follows\x22].replace(\x22系列\x22,\x22\x22);videos1.push({vod_id:aid,vod_name:title,vod_pic:img,vod_remarks:remark})});let\x20videos2=[];for(let\x20i=0;i<7;i++){let\x20vodList=jo[\x22result\x22][\x22timeline\x22][i][\x22episodes\x22];vodList.forEach(function(vod){if(vod[\x22published\x22]+\x22\x22===\x220\x22){let\x20aid=(vod[\x22season_id\x22]+\x22\x22).trim();let\x20title=vod[\x22title\x22].trim();let\x20img=vod[\x22cover\x22].trim();let\x20date=vod[\x22pub_ts\x22];let\x20remark=date+\x22\x20\x20\x20\x22+vod[\x22pub_index\x22];videos2.push({vod_id:aid,vod_name:title,vod_pic:img,vod_remarks:remark})}})}videos=videos2.concat(videos1)}return\x20videos}function\x20cate_filter(d,cookie){if(MY_CATE===\x221\x22){return\x20get_rank(MY_CATE,MY_PAGE)}else\x20if([\x222\x22,\x223\x22,\x224\x22,\x225\x22,\x227\x22].includes(MY_CATE)){return\x20get_rank2(MY_CATE,MY_PAGE)}else\x20if(MY_CATE===\x22全部\x22){let\x20tid=MY_FL.tid||\x221\x22;let\x20order=MY_FL.order||\x222\x22;let\x20season_status=MY_FL.season_status||\x22-1\x22;return\x20get_all(tid,MY_PAGE,order,season_status)}else\x20if(MY_CATE===\x22追番\x22){return\x20get_zhui(MY_PAGE,1)}else\x20if(MY_CATE===\x22追剧\x22){return\x20get_zhui(MY_PAGE,2)}else\x20if(MY_CATE===\x22时间表\x22){let\x20tid=MY_FL.tid||\x221\x22;return\x20get_timeline(tid,MY_PAGE)}else{return[]}}VODS=cate_filter();', '二级': { "\u0069\u0073\u005f\u006a\u0073\u006f\u006e": !![], 'title': '.result.title;.result.share_sub_title', 'img': '.result.cover', 'desc': '.result.new_ep.desc;.result.publish.pub_time;.result.subtitle', "\u0063\u006f\u006e\u0074\u0065\u006e\u0074": '.result.evaluate', 'tabs': 'js:pdfa=jsp.pdfa;TABS=[\x27B站\x27]', 'lists': "\u002e\u0072\u0065\u0073\u0075\u006c\u0074\u002e\u0065\u0070\u0069\u0073\u006f\u0064\u0065\u0073", 'list_text': 'title', "\u006c\u0069\u0073\u0074\u005f\u0075\u0072\u006c": "\u0063\u0069\u0064" }, "\u4e8c\u7ea7": '', '二级': 'js:function\x20zh(num){let\x20p=\x22\x22;if(Number(num)>1e8){p=(num/1e8).toFixed(2)+\x22亿\x22}else\x20if(Number(num)>1e4){p=(num/1e4).toFixed(2)+\x22万\x22}else{p=num}return\x20p}let\x20html=request(input);let\x20jo=JSON.parse(html).result;let\x20id=jo[\x22season_id\x22];let\x20title=jo[\x22title\x22];let\x20pic=jo[\x22cover\x22];let\x20areas=jo[\x22areas\x22][0][\x22name\x22];let\x20typeName=jo[\x22share_sub_title\x22];let\x20date=jo[\x22publish\x22][\x22pub_time\x22].substr(0,4);let\x20dec=\x22康康影视\x22+jo[\x22evaluate\x22];let\x20remark=jo[\x22new_ep\x22][\x22desc\x22];let\x20stat=jo[\x22stat\x22];let\x20status=\x22弹幕:\x20\x22+zh(stat[\x22danmakus\x22])+\x22\u3000点赞:\x20\x22+zh(stat[\x22likes\x22])+\x22\u3000投币:\x20\x22+zh(stat[\x22coins\x22])+\x22\u3000追番追剧:\x20\x22+zh(stat[\x22favorites\x22]);let\x20score=jo.hasOwnProperty(\x22rating\x22)?\x22评分:\x20\x22+jo[\x22rating\x22][\x22score\x22]+\x22\u3000\x22+jo[\x22subtitle\x22]:\x22暂无评分\x22+\x22\u3000\x22+jo[\x22subtitle\x22];let\x20vod={vod_id:id,vod_name:title,vod_pic:pic,type_name:typeName,vod_year:date,vod_area:areas,vod_remarks:remark,vod_actor:status,vod_director:score,vod_content:dec};let\x20ja=jo[\x22episodes\x22];let\x20playurls1=[];let\x20playurls2=[];ja.forEach(function(tmpJo){let\x20eid=tmpJo[\x22id\x22];let\x20cid=tmpJo[\x22cid\x22];let\x20link=tmpJo[\x22link\x22];let\x20part=tmpJo[\x22title\x22].replace(\x22#\x22,\x22-\x22)+\x22\x20\x22+tmpJo[\x22long_title\x22];playurls1.push(part+\x22$\x22+eid+\x22_\x22+cid);playurls2.push(part+\x22$\x22+link)});let\x20playUrl=playurls1.join(\x22#\x22)+\x22$$$\x22+playurls2.join(\x22#\x22);vod[\x22vod_play_from\x22]=\x22康康影视$$$一个就够了\x22;vod[\x22vod_play_url\x22]=playUrl;VOD=vod;', '搜索': '', '搜索': 'js:let\x20url1=input+\x22media_bangumi\x22;let\x20url2=input+\x22media_ft\x22;let\x20html=request(url1);let\x20msg=JSON.parse(html).message;if(msg!==\x220\x22){VODS=[{vod_name:KEY+\x22➢\x22+msg,vod_id:\x22no_data\x22,vod_remarks:\x22别点,缺少bili_cookie\x22,vod_pic:\x22https://ghproxy.net/https://raw.githubusercontent.com/hjdhnx/dr_py/main/404.jpg\x22}]}else{let\x20jo1=JSON.parse(html).data;html=request(url2);let\x20jo2=JSON.parse(html).data;let\x20videos=[];let\x20vodList=[];if(jo1[\x22numResults\x22]===0){vodList=jo2[\x22result\x22]}else\x20if(jo2[\x22numResults\x22]===0){vodList=jo1[\x22result\x22]}else{vodList=jo1[\x22result\x22].concat(jo2[\x22result\x22])}vodList.forEach(function(vod){let\x20aid=(vod[\x22season_id\x22]+\x22\x22).trim();let\x20title=KEY+\x22➢\x22+vod[\x22title\x22].trim().replace(\x27<em\x20class=\x22keyword\x22>\x27,\x22\x22).replace(\x22</em>\x22,\x22\x22);let\x20img=vod[\x22cover\x22].trim();let\x20remark=vod[\x22index_show\x22];videos.push({vod_id:aid,vod_name:title,vod_pic:img,vod_remarks:remark})});VODS=videos}', 'lazy': "", 'lazy': 'js:if(/^http/.test(input)){input={jx:1,url:input,parse:0,header:JSON.stringify({\x22user-agent\x22:\x22Mozilla/5.0\x22})}}else{let\x20ids=input.split(\x22_\x22);let\x20result={};let\x20url=\x22https://api.bilibili.com/pgc/player/web/playurl?qn=116&ep_id=\x22+ids[0]+\x22&cid=\x22+ids[1];let\x20html=request(url);let\x20jRoot=JSON.parse(html);if(jRoot[\x22message\x22]!==\x22success\x22){print(\x22需要大会员权限才能观看\x22);input=\x22\x22}else{let\x20jo=jRoot[\x22result\x22];let\x20ja=jo[\x22durl\x22];let\x20maxSize=-1;let\x20position=-1;ja.forEach(function(tmpJo,i){if(maxSize<Number(tmpJo[\x22size\x22])){maxSize=Number(tmpJo[\x22size\x22]);position=i}});let\x20url=\x22\x22;if(ja.length>0){if(position===-1){position=0}url=ja[position][\x22url\x22]}result[\x22parse\x22]=0;result[\x22playUrl\x22]=\x22\x22;result[\x22url\x22]=url;result[\x22header\x22]={Referer:\x22https://www.bilibili.com\x22,\x22User-Agent\x22:\x22Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/100.0.4896.127\x20Safari/537.36\x22};result[\x22contentType\x22]=\x22video/x-flv\x22;input=result}}' };